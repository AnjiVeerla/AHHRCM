<!-- <app-header></app-header> -->
<div class="container-fluid mt-3 ">
    <div class="row">
        <div class="col-lg-2">
            <div class="regist__wrapper">
                <div class="patient__details">
                    <!-- <div class="vip__badge">
                        <img src="assets/images/icons/VIP-crown-fill.svg" alt="">
                    </div> -->
                    <div class="patient__photo">
                        <img src="{{myPhoto ?  myPhoto : 'assets/images/Avatar.png'}}">
                    </div>
                    <div class="employee__badge fw-bold" *ngIf="displayBlock" translate>
                        {{roleText ? roleText : ''}}
                    </div>
                    <div class="employee__badge fw-bold" *ngIf="displayEmployee" translate>
                        {{roleText ? roleText : ''}}
                    </div>
                    <div class="file__upload">
                        <input type="file" class="input-file-upload" (change)="onSelectFile($event)">
                    </div>
                    <h3 class="patient__name" translate>
                        <p style="font-weight: bold;" class="patient__name">{{patientData?.FullName}}</p>
                            <!-- {{patientData?.Familyname}} -->
                    </h3>
                    <p>{{patientData?.Gender}}</p>
                    <p>{{patientData?.FullAge}}</p>
                </div>
                <nav id="navbar-example2" class="navbar px-2 pt-3">
                    <ul class="nav nav-pills">
                        <li class="nav-item">
                            <a class="nav-link">
                                <img src="assets/images/icons/icon-personal.svg" alt="">
                                <span translate>Personal Details </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link">
                                <img src="assets/images/icons/icon-address.svg" alt="">
                                <span translate>Address Details</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link">
                                <img src="assets/images/icons/icon-company.svg" alt="">
                                <span translate>Company Details</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="col-lg-10 container-fluid">
            <div class="container__wrapper">
                <form [formGroup]="patientRegForm" (keydown.enter)="$event.preventDefault()">
                    <div class="page-header sticky-top">
                        <h2 translate class="page-heading" translate>Patient Registration</h2>
                        <p>{{ipAddress}}</p>
                        <div class="actions ms-auto">
                            <button class="btn py-0 px-1" data-bs-toggle="modal" data-bs-target="#employeeInfo"><img
                                    src="assets/images/icons/icon-info.svg" width="28px" alt=""></button>
                            <button class="btn btn-main-outline" data-bs-toggle="modal"
                                data-bs-target="#doctorAvailability" translate>Doctor Availability</button>
                            <button class="btn btn-main-outline" (click)="redirectToOPBillpage()" translate>Out Patient
                                Billing</button>
                            <div class="dropdown">
                                <button class="btn btn-main-outline dropdown-toggle" type="button" translate
                                    id="patientRegistrationActions" data-bs-toggle="dropdown" aria-expanded="true">
                                    Actions
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="patientRegistrationActions">
                                    <li><a class="dropdown-item" data-bs-toggle="modal"
                                            data-bs-target="#viewModifications" translate>View Modifications</a></li>
                                    <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                                            data-bs-target="#UserPDF" translate>Print Card</a></li>
                                    <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                                            data-bs-target="#adultBand" translate>Adult Band Printing</a></li>
                                </ul>
                            </div>
                            <button class="btn btn-main-outline" type="button" (click)="ClearScreen();"
                                translate>Clear</button>
                            <button class="btn btn-main-fill" translate type="button" *ngIf="!isFetchPatientdata"
                                (click)="onSubmit($event)">Save</button>
                            <button class="btn btn-main-fill" type="button" *ngIf="isFetchPatientdata" translate
                                (click)="onSubmit($event)">Modify</button>

                        </div>
                    </div>
                    <div class="container-body">
                        <div class="accordion" id="patientEligibility">
                            <!-- Eligibility Accordion-->
                            <div class="accordion-item">
                                <div class="accordion-heading ">
                                    <div class="d-flex align-items-center justify-content-between">
                                        <div class="user-details">
                                            <p class="label-heading" translate>Patient Name</p>
                                            <p> {{patientData?.FullName}}</p>  <!-- {{patientData?.Familyname}} -->

                                        </div>
                                        <div class="user-details">
                                            <p class="label-heading" translate>Insurance Company :</p>
                                            <p></p>
                                        </div>
                                        <div class="">
                                            <div class="form-check form-check-inline mx-2">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                                    id="selfPay" value="option1" value="selfPay" [attr.checked]="true"
                                                    (change)="handleChange($event)">
                                                <label class="form-check-label" translate for="selfPay">Self Pay</label>
                                            </div>
                                            <div class="form-check form-check-inline mx-2">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                                    id="insured" value="option2" (change)="handleChange($event)">
                                                <label class="form-check-label" for="insured" translate>Insured</label>
                                            </div>
                                        </div>
                                        <div class="d-flex align-items-center" style="width:200px;">
                                            <label for="" class="form-label px-2" translate>Purpose</label>
                                            <div class="col">
                                                <select class="form-select" name="" id="" [disabled]="disableFields">
                                                    <option value="" translate>Select</option>
                                                    <option value="" translate>Coverage benefits</option>
                                                    <option value="" translate>Coverage Discovery</option>
                                                    <option value="" translate>Coverage Validation</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <button class="btn btn-main-outline" translate
                                                [disabled]="disableFields">Check
                                                Eligibility</button>

                                            <button class="mx-2" [disabled]="disableFields">
                                                <img src="assets/images/icons/icon-refresh.svg" alt="">
                                            </button>

                                            <button [ngClass]="togglebtn" data-bs-toggle="collapse"
                                                [disabled]="disableFields" data-bs-target="#eligibleCheck"
                                                aria-expanded="true" (click)="openCollapseEligibility()"
                                                aria-controls="eligibleCheck">
                                                <img src="assets/images/icons/icon-arrow-down.svg" alt="">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div id="eligibleCheck" [ngClass]="collapsebtn" aria-labelledby="headingOne"
                                    id="divCheckEligibility" data-bs-parent="#patientEligibility">
                                    <div class="accordion-body">
                                        <div class="row eligibility-info gx-2">
                                            <div class="col-lg-3">
                                                <div class="eligility-card card-1">
                                                    <h4><span></span></h4>
                                                    <p></p>
                                                </div>
                                            </div>
                                            <div class="col-lg-3">
                                                <div class="eligility-card card-2">
                                                    <h4><span></span></h4>
                                                    <p></p>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="eligility-card card-3">
                                                    <div class="row mt-3">
                                                        <div class="col">
                                                            <div class="user-details">
                                                                <p class="label-heading"></p>
                                                                <p></p>
                                                            </div>
                                                        </div>
                                                        <div class="col-2">
                                                            <div class="user-details">
                                                                <p class="label-heading"></p>
                                                                <p></p>
                                                            </div>
                                                        </div>
                                                        <div class="col">
                                                            <div class="user-details">
                                                                <p class="label-heading"></p>
                                                                <p></p>
                                                            </div>
                                                        </div>
                                                        <div class="col-2">
                                                            <div class="user-details">
                                                                <p class="label-heading"></p>
                                                                <p></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td><button class="btn btn-secondary-outline">View</button></td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-root-margin="0px 0px -40%"
                            data-bs-smooth-scroll="true" class="scrollspy-example" tabindex="0">
                            <div class="row py-3 gx-4 gy-3" id="personal-details">
                                <div class="col-lg-12">
                                    <div class="section__heading">
                                        <h3 translate>Personal Details</h3>
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <label for="" class="form-label" translate>Title<span
                                            class="required-asterisk">*</span></label>
                                    <select class="form-select" formControlName="TitleID"
                                        (change)="onTitleChange($event)">
                                        <option value="" selected translate>Select Title</option>
                                        <option *ngFor="let Title of Titles" [ngValue]="Title.Id">
                                            {{this.lang == 'ar' ? Title.Names2L : Title.Names}}
                                        </option>
                                    </select>
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('TitleID')?.errors) || (!this.patientRegForm.get('TitleID')?.pristine && this.patientRegForm.get('TitleID')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('TitleID')?.errors?.['required']" translate>
                                            Title is
                                            required</div>
                                    </span>
                                </div>

                                <div class="col-lg-5">
                                    <label for="" class="form-label" translate>Family Name<span
                                            class="required-asterisk">*</span></label>
                                    <input type="text" class="form-control" placeholder="{{'Family Name' |translate}}"
                                        (keyup)="getFamilyName2L($event)" [matAutocomplete]="auto1"
                                        formControlName="Familyname">
                                    <mat-autocomplete #auto1="matAutocomplete">
                                        <mat-option *ngFor="let familyname2l of familynames2lList"
                                            (onSelectionChange)="onSelectFamilyname2l(familyname2l.Name2L)"
                                            [value]="familyname2l.Name.trim()">
                                            {{familyname2l.Name}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <input type="text" class="form-control form-info-text text-end arb-text"
                                        placeholder="{{'Family Name in Arabic' |translate}}"
                                        formControlName="Familyname2L">
                                    <!-- <span class="form-info-text">Family Name in Arabic</span> -->
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('Familyname')?.errors) || (!this.patientRegForm.get('Familyname')?.pristine && this.patientRegForm.get('Familyname')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('Familyname')?.errors?.['required']"
                                            translate>Family
                                            Name is
                                            required</div>
                                    </span>
                                </div>
                                <div class="col-lg-5">
                                    <label for="" class="form-label" translate>First Name<span
                                            class="required-asterisk">*</span></label>
                                    <input type="text" class="form-control" placeholder="{{'First Name' |translate}}"
                                        (keyup)="getFirstName2L($event)" [matAutocomplete]="auto2"
                                        formControlName="FirstName">
                                    <mat-autocomplete #auto2="matAutocomplete">
                                        <mat-option *ngFor="let Firstname2l of firstnames2lList"
                                            (onSelectionChange)="onSelectFirstname2l(Firstname2l.Name2L)"
                                            [value]="Firstname2l.Name.trim()">
                                            {{Firstname2l.Name}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <input type="text" class="form-control form-info-text text-end arb-text"
                                        placeholder="{{'First Name in Arabic' |translate}}"
                                        formControlName="FirstName2L">
                                    <!-- <span class="form-info-text">First Name in Arabic</span> -->
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('FirstName')?.errors) || (!this.patientRegForm.get('FirstName')?.pristine && this.patientRegForm.get('FirstName')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('FirstName')?.errors?.['required']"
                                            translate>First Name is required</div>
                                    </span>
                                </div>
                                <div class="col-lg-2">
                                    <label for="" class="form-label" translate>Select</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="checkVip"
                                            formControlName="Isvip" (change)="onRoleChange()">
                                        <label class="form-check-label" for="checkVip" translate>
                                            VIP
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="checkEmployee"
                                            formControlName="IsEmployee" (change)="onRoleChange()">
                                        <label class="form-check-label" for="checkEmployee" translate>
                                            Employee
                                        </label>
                                        <button class="btn py-0 px-1 btn-sm" data-bs-toggle="modal"
                                            (click)="openEmployeeDetailsmodal()"><img src="assets/images/icons/icon-info.svg"
                                                alt=""></button>
                                    </div>
                                </div>
                                <!-- <div class="col-lg-5">
                            <label for="" class="form-label">Last Name</label>
                            <input type="text" class="form-control" placeholder="Last Name"  formControlName="lastName">
                            <span class="form-info-text">Last Name in Arabic</span>
                        </div> -->
                                <div class="col-lg-5 col-md-5">
                                    <label for="" class="form-label" translate>Grand Father Name</label>
                                    <input type="text" class="form-control"
                                        placeholder="{{'Grand Father Name' |translate}}"
                                        (keyup)="getGrandfatherName2L($event)" [matAutocomplete]="auto3"
                                        formControlName="GrandFatherName">
                                    <mat-autocomplete #auto3="matAutocomplete">
                                        <mat-option *ngFor="let grandfatherName2l of grandfathernames2lList"
                                            (onSelectionChange)="onSelectGrandfathername2l(grandfatherName2l.Name2L)"
                                            [value]="grandfatherName2l.Name.trim()">
                                            {{grandfatherName2l.Name}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <input type="text" class="form-control form-info-text text-end arb-text"
                                        placeholder="{{'Grand Father Name in Arabic' |translate}}"
                                        formControlName="GrandFatherName2L">
                                    <!-- <span class="form-info-text">Grand Father Name in Arabic</span> -->
                                </div>

                                <div class="col-lg-5">
                                    <label for="" class="form-label" translate>Middle Name<span
                                            class="required-asterisk">*</span></label>
                                    <input type="text" class="form-control" placeholder="{{'Middle Name' |translate}}"
                                        (keyup)="getMiddleName2L($event)" [matAutocomplete]="auto4"
                                        formControlName="MiddleName">
                                    <mat-autocomplete #auto4="matAutocomplete">
                                        <mat-option *ngFor="let middlename2l of middlenames2lList"
                                            (onSelectionChange)="onSelectMiddlename2l(middlename2l.Name2L)"
                                            [value]="middlename2l.Name.trim()">
                                            {{middlename2l.Name}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <input type="text" class="form-control form-info-text text-end arb-text"
                                        placeholder="{{'Middle Name in Arabic' |translate}}"
                                        formControlName="MiddleName2L">
                                    <!-- <span class="form-info-text">Middle Name in Arabic</span> -->
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('MiddleName')?.errors) || (!this.patientRegForm.get('MiddleName')?.pristine && this.patientRegForm.get('MiddleName')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('MiddleName')?.errors?.['required']"
                                            translate>Middle Name is required</div>
                                    </span>
                                </div>
                                <div class="col-lg-4 col-md-6 ">
                                    <!-- <mat-form-field appearance="outile">
                                        <mat-label>Choose a date</mat-label>
                                        <input matInput [matDatepicker]="picker" formControlName="DOB">
                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                    </mat-form-field> -->

                                    <label for="" class="form-label" required translate>Date of Birth</label>
                                    <div class="row gx-2">
                                        <div class="col-6">
                                            <mat-form-field appearance="fill">
                                                <mat-label translate>dd-MMM-yyyy</mat-label>
                                                <input matInput formControlName="DOB" class="" [matDatepicker]="DOB"
                                                    (dateChange)="onChangeDate($event)" (click)="DOB.open()">
                                                <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
                                                <mat-datepicker-toggle matSuffix [for]="DOB"></mat-datepicker-toggle>
                                                <mat-datepicker #DOB></mat-datepicker>
                                            </mat-form-field>
                                        </div>
                                        <div class="col-6">
                                            <input type="text" class="form-control text-end" [value]="hijriDate"
                                                (blur)="fetchEnglishDate($event)"
                                                placeholder="{{'In Hijri' |translate}}">
                                        </div>
                                    </div>
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('DOB')?.errors) || (!this.patientRegForm.get('DOB')?.pristine && this.patientRegForm.get('DOB')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('DOB')?.errors?.['required']" translate>DOB
                                            is required</div>
                                    </span>

                                    <!-- <mat-form-field appearance="outline">
                                        <input matInput formControlName="DOB" class="form-control" [matDatepicker]="DOB" 
                                        (dateChange)="onChangeDate($event)" (click)="DOB.open()">                                              
                                        <mat-datepicker-toggle matSuffix [for]="DOB">                                              
                                        </mat-datepicker-toggle>                                              
                                        <mat-datepicker #DOB>                                              
                                        </mat-datepicker>                                              
                                    </mat-form-field> -->
                                    <!-- <div class="col"> -->

                                    <!-- </div> -->
                                    <!--
                                    <div class="row gx-2">
                                        <div class="col">
                                            <input type="date" step="0.01" class="form-control" id="dateofbirth"
                                                placeholder="dd-MMM-yyyy" [max]="tomorrow"
                                                (change)="onChangeDate($event)" formControlName="DOB" 
                                                onfocus="(this.type='date')" data-date-format="dd-MMM-yyyy"> 
                                        </div>                                        
                                    </div> -->
                                </div>
                                <div class="col-lg-3 col-md-4">
                                    <label for="" class="form-label" translate>Age<span
                                            class="required-asterisk">*</span></label>
                                    <div class="row gx-2">
                                        <div class="col">
                                            <input type="text" (change)="onAgeChange()" class="form-control"
                                                placeholder="{{'Age' |translate}}" formControlName="Age">
                                        </div>
                                        <div class="col">
                                            <select name="" class="form-select" id="" (change)="onAgeChange()"
                                                formControlName="AgeUOMID">
                                                <option value="" selected translate>Select</option>
                                                <option *ngFor="let AgeUOM of AgeUOMs" [ngValue]="AgeUOM.Id">
                                                    {{this.lang == 'ar' ? AgeUOM.Names2L : AgeUOM.Names}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('Age')?.errors) || (!this.patientRegForm.get('Age')?.pristine && this.patientRegForm.get('Age')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('Age')?.errors?.['required']" translate>Age
                                            is required</div>
                                    </span>
                                </div>
                                <div class="col-lg col-md-4">
                                    <label for="" class="form-label" translate>Gender<span
                                            class="required-asterisk">*</span></label>
                                    <div class="col">
                                        <select name="" class="form-select" id="" formControlName="GenderID"
                                            (change)="onGenderChange($event)">
                                            <option value="" selected translate>Gender</option>
                                            <option *ngFor="let Gender of Genders" [ngValue]="Gender.Id">
                                                {{this.lang == 'ar' ? Gender.Names2L : Gender.Names}}</option>
                                        </select>
                                    </div>
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('GenderID')?.errors) || (!this.patientRegForm.get('GenderID')?.pristine && this.patientRegForm.get('GenderID')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('GenderID')?.errors?.['required']"
                                            translate>Gender is required</div>
                                    </span>
                                </div>
                                <div class="col-lg col-md-4">
                                    <label for="" class="form-label" translate>Marital Status</label>
                                    <div class="col">
                                        <select name="" class="form-select" id="" formControlName="MaritalStatusID"
                                            (change)="onMaritalStatusChange($event)">
                                            <option value="0" selected translate>Select</option>
                                            <option *ngFor="let MaritalStatus of MaritalStatus"
                                                [ngValue]="MaritalStatus.Id">
                                                {{this.lang == 'ar' ? MaritalStatus.Names2L : MaritalStatus.Names}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg col-md-4">
                                    <label for="" class="form-label" translate>Religion<span
                                            class="required-asterisk">*</span></label>
                                    <div class="col">
                                        <select name="" class="form-select" id="" formControlName="ReligionID"
                                            (change)="onReligionChange($event)">
                                            <option value="" selected translate>Select</option>
                                            <option *ngFor="let Religion of Religions" [ngValue]="Religion.Id">
                                                {{this.lang == 'ar' ? Religion.Names2L : Religion.Names}}</option>
                                        </select>
                                    </div>
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('ReligionID')?.errors) || (!this.patientRegForm.get('ReligionID')?.pristine && this.patientRegForm.get('ReligionID')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('ReligionID')?.errors?.['required']"
                                            translate>Religion is required</div>
                                    </span>
                                </div>
                                <div class="col-lg-9 col-md-12 col-xl-7 mt-4 col-md-10">
                                    <div class="row">
                                        <div class="col-5 col-lg-6">
                                            <label for="" class="form-label mb-0" translate>Select</label>
                                            <div class="form-check form-check-inline mx-2">
                                                <input class="form-check-input" type="radio" name="socialTypeSelection"
                                                    id="nationalID" value="nationalID" (change)="onChangeSocialType()"
                                                    formControlName="socialTypeSelection">
                                                <label class="form-check-label" for="nationalID" translate>National
                                                    ID<span class="required-asterisk">*</span></label>
                                            </div>
                                            <div class="form-check form-check-inline mx-2">
                                                <input class="form-check-input" type="radio" name="socialTypeSelection"
                                                    id="passport" value="passport" (change)="onChangeSocialType()"
                                                    formControlName="socialTypeSelection">
                                                <label class="form-check-label" for="passport" translate>Passport<span
                                                        class="required-asterisk">*</span></label>
                                            </div>
                                            <div class="d-flex gap-2 align-items-center">
                                                <input type="text" class="form-control col"
                                                [placeholder]="emailPlaceholderText" id="txtSSN"
                                                (keypress)="excludeSpecialChars($event)" maxLength="10"
                                                formControlName="SSN" autocomplete="disabled">
                                                <button class="btn btn-main-outline" (click)="getPatientInfoByYakeenService()" translate>Get Info</button>
                                                
                                            </div>
                                            <div class="form-info-text" style="color: #368796;"><p class="mb-0" translate>Iqama Expiry Date:</p>{{iqamaExpiryDate}}</div>
                                            <!-- placeholder="National ID No" -->
                                            <span class="text-danger"
                                                *ngIf="(isFormSubmitted && this.patientRegForm.get('SSN')?.errors) || (!this.patientRegForm.get('SSN')?.pristine && this.patientRegForm.get('SSN')?.invalid)">
                                                <div *ngIf="this.patientRegForm.get('SSN')?.errors?.['required']"
                                                    translate>{{nationalIdReqd}}</div>
                                                <!-- <div *ngIf="this.patientRegForm.get('SSN')?.errors?.['pattern']">
                                                    Enter valid SSN, first char starts with 1 or 2</div> -->
                                                <!-- <div *ngIf="this.patientRegForm.get('SSN')?.errors?.['maxlength']">
                                                    SSN should not exceed 10</div> -->
                                                <div *ngIf="this.patientRegForm.get('SSN')?.errors?.['minlength']"
                                                    translate>
                                                    {{ssnLength}}</div>
                                            </span>
                                            <div class="text-danger" *ngIf="isNationalIdMessage">{{NationalIdMessage}}
                                            </div>
                                        </div>
                                        <div class="col">
                                            <label for="" class="form-label px-2" translate>Nationality<span
                                                class="required-asterisk">*</span></label>
                                        <!-- <select name="" id="" class="form-select" formControlName="NationalityID"
                                            (change)="onNationalityChange($event)">
                                            <option value="" selected translate>Select</option>
                                            <option *ngFor="let Nationality of Nationalities" [ngValue]="Nationality.Id">
                                                {{this.lang == 'ar' ? Nationality.Names2L : Nationality.Names}}</option>
                                        </select> -->
                                        <input list="menace" name="menace" class="form-select" formControlName="Nationality" (change)="onNationalityChange($event)">
                                        <datalist id="menace" class="datalist">
                                            <option *ngFor="let Nationality of Nationalities" [ngValue]="Nationality.Id">
                                                {{this.lang == 'ar' ? Nationality.Names2L : Nationality.Names}} 
                                            </option>
                                       </datalist>                                  
                                    
                                        <span class="text-danger"
                                            *ngIf="(isFormSubmitted && this.patientRegForm.get('NationalityID')?.errors) || (!this.patientRegForm.get('NationalityID')?.pristine && this.patientRegForm.get('NationalityID')?.invalid)">
                                            <div *ngIf="this.patientRegForm.get('NationalityID')?.errors?.['required']"
                                                translate>Nationality is required</div>
                                        </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-4 mt-4">
                                    <label for="" class="form-label px-2">&nbsp;</label>
                                            <div class="input-group">
                                                <!-- <input type="file" class="form-control custom-upload" id="uploadID"
                                                (change)="onFileSelected($event)"> -->
                                                <input id="nationalId" type='file' translate (change)="onSelectFile($event)"
                                                    formControlName="nationalIDFile" class="form-control custom-upload"
                                                    accept=".pdf, .jpeg, .jpg, .bmp, .gif, .png, .tiff">
                                                    <!-- (change)="uploadNationalIDFile($event)"> -->
                                            </div>
                                            <div class="form-info-text ">
                                                <!-- <a (click)="viewUploadedDocs()" translate>View Documents</a> -->
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal"
                                                    data-bs-target="#NationalIdPhoto" translate>View Documents</a>
                                            </div>
                                            <!-- <div *ngIf="showNationalIDFile">
                                                <a class="uploadAnchor" (click)=downloadFile(nationalIDFileName)> <img
                                                        *ngIf="nationalIDFileName.length>0"
                                                        src="../../../..//assets/images/attachment.png">{{
                                                    nationalIDFileName }} </a> &nbsp;
                                                <a *ngIf="nationalIDFileName.length>0" translate class="trash-alt"> </a>
                                            </div> -->
                                </div>
                            </div>
                            <!-- <div>                               
                                  
                                  <button mat-raised-button (click)="yesNoDialog()">
                                    Open Yes/No Dialog
                                  </button>
                                  
                                  <button mat-raised-button (click)="confirmCancelDialog()">
                                    Open Confirm/Cancel Dialog
                                  </button>
                                  <button mat-raised-button (click)="openDialogTable()">
                                    Open Table Dialog
                                  </button>
                                </div> -->
                            <div class="row py-3 gx-4 gy-3" id="address-details">
                                <div class="col-lg-12">
                                    <div class="section__heading ">
                                        <h3 translate>Present Address Details</h3>
                                    </div>

                                </div>
                                <div class="col-lg-9">
                                    <label for="" class="form-label" translate>Address<span
                                            class="required-asterisk">*</span></label>
                                    <input type="text" class="form-control" placeholder="{{'Address' |translate}}"
                                        formControlName="Address01" autocomplete="disabled">
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('Address01')?.errors) || (!this.patientRegForm.get('Address01')?.pristine && this.patientRegForm.get('Address01')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('Address01')?.errors?.['required']"
                                            translate>Address is required</div>
                                    </span>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Email</label>
                                    <input type="text" class="form-control" placeholder="{{'Email' |translate}}"
                                        formControlName="Email" autocomplete="disabled">
                                </div>
                                <div class="text-danger"
                                    *ngIf="(isFormSubmitted && this.patientRegForm.get('Email')?.errors) || (!this.patientRegForm.get('Email')?.pristine && this.patientRegForm.get('Email')?.invalid)">
                                    <!-- <div *ngIf="this.patientRegForm.get('Email')?.errors?.['required']">Email is required</div> -->
                                    <div *ngIf="this.patientRegForm.get('Email')?.errors?.['pattern']" translate>Enter
                                        valid email
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Country</label>
                                    <div class="input-group">
                                        <!-- <input type="text" class="form-control" placeholder="Country"
                                            aria-label="Country Name" formControlName="country" readonly> -->
                                        <!-- <button class="btn btn-secondary-fill btn-icon" type="button" id="button-addon2">
                                    <img src="assets/images/icons/icon-search.svg" alt="">
                                </button> -->
                                        <select name="" id="" class="form-select" formControlName="country"
                                            (change)="onCountryChange($event)">
                                            <option value="" selected translate>Select</option>
                                            <option *ngFor="let Country of Countries" [ngValue]="Country.Id">
                                                {{this.lang == 'ar' ? Country.Names2L : Country.Names}}</option>
                                        </select>
                                    </div>
                                </div>
                                <!-- <div class="col-lg-3">
                                    <label for="" class="form-label" translate>State</label>
                                    <input type="text" class="form-control" placeholder="State" formControlName="state"
                                        readonly>
                                </div> -->
                                <div class="col-lg-3">
                                    <label for="" class=" form-label" translate>City<span
                                            class="required-asterisk">*</span></label>
                                    <div class="input-group">
                                        <select name="" id="" class="form-select" formControlName="CityID"
                                            (change)="onCityChange($event)">
                                            <option value="" selected translate>Select</option>
                                            <option *ngFor="let City of Cities" [ngValue]="City.CityID">
                                                {{this.lang == 'ar' ? City.CityName2L : City.CityName}}</option>
                                        </select>
                                        <!-- <input type="text" class="form-control" placeholder="City"
                                            formControlName="CityID" [matAutocomplete]="auto"
                                            (keyup)="searchCity($event)">
                                        <button class="btn btn-secondary-fill btn-icon" type="button"
                                            id="button-addon2">
                                            <img src="assets/images/icons/icon-search.svg" alt="">
                                        </button> -->
                                        <!-- <mat-autocomplete #auto="matAutocomplete">
                                            <mat-option *ngFor="let city of listOfCities"
                                                (onSelectionChange)="onSelectCity(city)" [value]="city.Name.trim()">
                                                {{city.Name}}
                                            </mat-option>
                                        </mat-autocomplete>                                         -->
                                    </div>
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('CityID')?.errors) || (!this.patientRegForm.get('CityID')?.pristine && this.patientRegForm.get('CityID')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('CityID')?.errors?.['required']" translate>
                                            City is required</div>
                                    </span>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Area</label>
                                    <select class="form-select" formControlName="CityAreaID"
                                        (change)="onAreaChange($event)">
                                        <option value="" selected translate>Select Area</option>
                                        <option *ngFor="let cityArea of cityAreas" [ngValue]="cityArea.CityAreaID">
                                            {{this.lang == 'ar' ? cityArea.Area2L : cityArea.Area}}</option>
                                    </select>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Mobile Number<span
                                            class="required-asterisk">*</span></label>
                                    <input appNumberOnly type="text" class="form-control"
                                        placeholder="{{'Mobile Number' |translate}}" maxlength="10"
                                        formControlName="MobileNo" (blur)="checkMobileNummber()"
                                        autocomplete="disabled">
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('MobileNo')?.errors) || (!this.patientRegForm.get('MobileNo')?.pristine && this.patientRegForm.get('MobileNo')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('MobileNo')?.errors?.['required']"
                                            translate>Mobile number is required</div>
                                        <div *ngIf="this.patientRegForm.get('MobileNo')?.errors?.['pattern']" translate>
                                            Enter valid mobile number, first char starts with 0 or 5</div>
                                        <div *ngIf="this.patientRegForm.get('MobileNo')?.errors?.['maxlength']"
                                            translate>Mobile number should not exceed 10</div>
                                        <div *ngIf="this.patientRegForm.get('MobileNo')?.errors?.['minlength']">Mobile
                                            should be 10</div>
                                    </span>
                                    <span class="text-danger" *ngIf="isMobileNumberSame" translate>Mobile number should
                                        not be same</span>
                                </div>

                                <div class="col-lg-12">
                                    <div class="section__heading">
                                        <h3 translate> Next of Kin (Emergency Contact)</h3>
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Contact Name<span
                                            class="required-asterisk">*</span></label>
                                    <input type="text" class="form-control" placeholder="{{'Contact Name' |translate}}"
                                        formControlName="ContactName" autocomplete="disabled">
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('ContactName')?.errors) || (!this.patientRegForm.get('ContactName')?.pristine && this.patientRegForm.get('ContactName')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('ContactName')?.errors?.['required']"
                                            translate>Contact Name is required</div>
                                    </span>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Relation to Patient<span
                                            class="required-asterisk">*</span></label>
                                    <select name="" id="" class="form-select" formControlName="ContRelationID"
                                        (change)="onRelationToPatientChange($event)">
                                        <option value="" selected translate>Select</option>
                                        <option *ngFor="let Relation of Relations" [ngValue]="Relation.Id">
                                            {{this.lang == 'ar' ? Relation.Names2L : Relation.Names}}</option>
                                    </select>
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('ContRelationID')?.errors) || (!this.patientRegForm.get('ContRelationID')?.pristine && this.patientRegForm.get('ContRelationID')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('ContRelationID')?.errors?.['required']"
                                            translate>Relation to Patient is required</div>
                                    </span>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Mobile Number<span
                                            class="required-asterisk">*</span></label>
                                    <input appNumberOnly type="text" class="form-control"
                                        placeholder="{{'Mobile Number' |translate}}" maxlength="10"
                                        formControlName="ContPhoneNo" (blur)="checkMobileNummber()"
                                        autocomplete="disabled">
                                    <span class="text-danger"
                                        *ngIf="(isFormSubmitted && this.patientRegForm.get('ContPhoneNo')?.errors) || (!this.patientRegForm.get('ContPhoneNo')?.pristine && this.patientRegForm.get('ContPhoneNo')?.invalid)">
                                        <div *ngIf="this.patientRegForm.get('ContPhoneNo')?.errors?.['required']"
                                            translate>Mobile
                                            number is required</div>
                                        <div *ngIf="this.patientRegForm.get('ContPhoneNo')?.errors?.['pattern']"
                                            translate>Enter
                                            valid mobile number, first char
                                            starts
                                            with 0 or 5</div>
                                        <div *ngIf="this.patientRegForm.get('ContPhoneNo')?.errors?.['maxlength']"
                                            translate>
                                            Mobile number should not exceed 10</div>
                                        <div *ngIf="this.patientRegForm.get('ContPhoneNo')?.errors?.['minlength']"
                                            translate>
                                            Mobile should be 10</div>
                                    </span>
                                    <span class="text-danger" *ngIf="isMobileNumberSame" translate>Mobile number should
                                        not be
                                        same</span>
                                </div>
                            </div>

                            <div class="row py-3 gx-4 gy-3" id="company-details">
                                <div class="col-lg-12">
                                    <div class="section__heading">
                                        <h3 translate>Company Details</h3>
                                        <div class="actions ms-auto">
                                            <button class="btn btn-secondary-fill " translate>Add</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <label for="" class="form-label" translate>Company</label>
                                    <div class="row gx-2">
                                        <div class="col-4">
                                            <input type="text" class="form-control col-4"
                                                placeholder="{{'Code' |translate}}">
                                        </div>
                                        <div class="col-8">
                                            <div class="input-group">
                                                <input type="text" class="form-control"
                                                    placeholder="{{'Name' |translate}}" aria-label="Country Name">
                                                <button class="btn btn-secondary-fill btn-icon" type="button"
                                                    (click)="openDialogTable()" id="button-addon2">
                                                    <img src="assets/images/icons/icon-search.svg" alt="">
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Phone No.</label>
                                    <input type="text" class="form-control" placeholder="{{'Phone no.' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Fax</label>
                                    <input type="text" class="form-control" placeholder="{{'Fax' |translate}}">
                                </div>
                                <div class="col-lg-6">
                                    <label for="" class="form-label" translate>Insurance.</label>
                                    <input type="text" class="form-control" placeholder="{{'Insurance' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Email Id</label>
                                    <input type="text" class="form-control" placeholder="{{'Email' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Policy No.</label>
                                    <input type="text" class="form-control" placeholder="{{'Policy No.' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Max col.</label>
                                    <input type="text" class="form-control" placeholder="{{'Max Col' |translate}}">
                                </div>
                                <div class="col-lg-9">
                                    <label for="" class="form-label" translate>Company Details.</label>
                                    <input type="text" class="form-control"
                                        placeholder="{{'Company Details' |translate}}">
                                </div>
                            </div>
                            <div class="table-responsive py-3">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th translate>Default</th>
                                            <th translate>Company Name</th>
                                            <th translate>Grade</th>
                                            <th translate>Insurance No.</th>
                                            <th translate>Document</th>
                                            <th translate>Card Validity</th>
                                            <th translate>Referral Basis No.</th>
                                            <th translate>Validity From</th>
                                            <th translate>Validity To</th>
                                            <th translate>Emp ID.</th>
                                            <th translate>MR No. / Policy No.</th>
                                            <th translate>Insurance Company ID</th>
                                            <th translate>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div>

                                                </div>
                                            </td>
                                            <td>

                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>

                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                            <div class="row py-3 gx-4 gy-3">
                                <div class="col-lg-12">
                                    <div class="section__heading">
                                        <h3 translate>
                                            Employee Information
                                        </h3>
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Employee Id.</label>
                                    <input type="text" class="form-control" placeholder="{{'Employee Id' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Grade</label>
                                    <select name="" class="form-select" id="">
                                        <option value="" selected translate>Grade Select</option>
                                        <option value="" translate>option-1</option>
                                        <option value="" translate>option-2</option>
                                    </select>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Relationship</label>
                                    <select name="" class="form-select" id="">
                                        <option value="" selected translate>Select</option>
                                        <option *ngFor="let Relation of Relations" [ngValue]="Relation.Id">
                                            {{this.lang == 'ar' ? Relation.Names2L : Relation.Names}}</option>
                                    </select>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Insurance No.</label>
                                    <input type="text" class="form-control" placeholder="{{'Insurance No' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Valid From</label>
                                    <input type="text" class="form-control" placeholder="{{'Valid From' |translate}}"
                                        disabled>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Valid To</label>
                                    <input type="text" class="form-control" placeholder="{{'Valid To' |translate}}"
                                        disabled>
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Relation Code</label>
                                    <input type="text" class="form-control"
                                        placeholder="{{'Relation Code' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Card Validity</label>
                                    <!-- <input type="text" class="form-control" placeholder="dd-MMM-yyyy"> -->
                                    <mat-form-field appearance="fill">
                                        <mat-label>dd-MMM-yyyy</mat-label>
                                        <input matInput class="" [matDatepicker]="CardValidity"
                                            (click)="CardValidity.open()">
                                        <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
                                        <mat-datepicker-toggle matSuffix [for]="CardValidity"></mat-datepicker-toggle>
                                        <mat-datepicker #CardValidity></mat-datepicker>
                                    </mat-form-field>
                                </div>


                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Referal Basis No.</label>
                                    <input type="text" class="form-control" placeholder="{{'Basis No' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>MR No. / Policy No.</label>
                                    <input type="text" class="form-control"
                                        placeholder="{{'MR No. / Policy No.' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Referral Basis</label>
                                    <input type="text" class="form-control"
                                        placeholder="{{'Referral Basis' |translate}}">
                                </div>
                                <div class="col-lg-3">
                                    <label for="" class="form-label" translate>Upload</label>
                                    <input type="file" class="form-control custom-upload label-upload"
                                        placeholder="{{'Referral Basis' |translate}}">
                                    <div class="form-info-text ">
                                        <a href="#" translate>View Documents</a>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </form>
            </div>

        </div>

    </div>
</div>
<!-- <div class="modal" id="saveMessage" tabindex="-1" [ngStyle]="{'display':displayStyle}">
    <div class="modal-dialog modal-toast">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img src="assets/images/icons/toast-success.svg" alt="">
                <h3>Success</h3>
                <p *ngIf="!isFetchPatientdata">Patient Registered Successfully</p>
                <p *ngIf="isFetchPatientdata">Patient Information Modified Successfully</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-main-outline" (click)="closePopup()">Ok</button>
                <button type="button" class="btn btn-danger-outline" data-bs-dismiss="modal"
                    (click)="closePopup()">Close</button>
            </div>
        </div>
    </div>
</div> -->
<div class="modal" data-bs-backdrop="static" id="saveMessage" tabindex="-1" [ngStyle]="{'display':displayStyle}">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">

            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <h3 translate>Success</h3>
                <p *ngIf="!isFetchPatientdata" translate>Patient Registered Successfully</p>
                <p *ngIf="isFetchPatientdata" translate>Patient Information Modified Successfully</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-main-outline" (click)="closePopup()">Ok</button>
                <!-- <button type="button" class="btn btn-danger-outline" data-bs-dismiss="modal"
                    (click)="closePopup()">Close</button> -->
            </div>
        </div>
    </div>
</div>



<div class="modal" data-bs-backdrop="static" id="alertMessage" tabindex="-1" [ngStyle]="{'display':displayErrModal}">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <!-- <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="closeErrorPopup()"></button>
            </div> -->
            <img class="modal-header-icon" src="assets/images/icons/toast-error.svg" alt="">
            <div class="modal-body">
                <h3 translate>Alert</h3>
                <p translate>{{ErrorMessage}}</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger-outline" #closebutton data-bs-dismiss="modal"
                    (click)="closeErrorPopup()" aria-label="Close" translate>Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-backdrop="static" id="noRecMessage" tabindex="-1" [ngStyle]="{'display':displayNoRecModal}">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <!-- <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="closeErrorPopup()"></button>
            </div> -->
            <img class="modal-header-icon" src="assets/images/icons/toast-error.svg" alt="">
            <div class="modal-body">
                <h3 translate>Alert</h3>
                <p translate>No Records Found</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger-outline" #closebutton data-bs-dismiss="modal"
                    (click)="closeNoRecFound()" aria-label="Close" translate>Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-backdrop="static" id="infoMessage" tabindex="-1" [ngStyle]="{'display':displayInfoModal}">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <h3 translate>Alert</h3>
                <p translate>{{ noDataMessage }}</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger-outline" #closebutton data-bs-dismiss="modal"
                    (click)="closeInfoModalpopup()" aria-label="Close" translate>Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-backdrop="static" id="infoMessage" tabindex="-1" [ngStyle]="{'display':displayYakeenNoDataModal}">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <h3 translate>Alert</h3>
                <p translate>No Records Found from Yakeen Service.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger-outline" #closebutton data-bs-dismiss="modal"
                    (click)="closeYakeenNodataModalpopup()" aria-label="Close" translate>Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-backdrop="static" tabindex="-1" id="UserPDF" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button class="btn btn-secondary-fill mx-1" (click)="generatePDF()" translate>Download</button>
                <button class="btn btn-secondary-fill mx-1" translate>Print</button>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body" id="DownloadPdf">
                <div class="row">
                    <div class="col-6">
                        <img style="height:3.5rem" src="assets/images/AHH-Logo.png" alt="">
                    </div>
                    <div class="col-6">
                        <qr-code [value]="qrCodeInfor"></qr-code>
                    </div>
                </div>
                <div class="row gy-2">
                    <div class="col-12" translate>Name: <span>{{patientData?.FullName}}</span></div>
                    <!-- <div class="col-6"> {{patientData?.FullName}}</div> -->
                    <div class="col-12" translate>Gender: <span>{{patientData?.Gender}}</span></div>
                    <!-- <div class="col-6"> {{patientData?.Gender}}</div> -->
                    <div class="col-12" translate>DOB: <span>{{patientData?.DOB | date:'dd-MMM-yyyy'}}</span></div>
                    <!-- <div class="col-6">{{patientData?.DOB | date:'dd-MMM-yyyy'}}</div> -->
                    <div class="col-12" translate>Nationality: <span>{{patientData?.Nationality}}</span> </div>
                    <div class="col-12" translate>National ID: <span>{{patientData?.SSN}}</span></div>
                    <!-- <div class="col-6">{{patientData?.SSN}} </div> -->
                    <div class="col-12" translate>Mobile No:<span>{{patientData?.MobileNo}}</span></div>
                    <!-- <div class="col-6">{{patientData?.MobileNo}}</div> -->
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" data-bs-backdrop="static" tabindex="-1" id="adultBand" tabindex="-1">
    <div class="modal-dialog modal-md modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <button class="btn btn-secondary-fill mx-1" (click)="generateAdultBandPDF()" translate>Download</button>
                <button class="btn btn-secondary-fill mx-1" translate>Print</button>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body" id="DownloadAdultBand">
                <div class="print-wrapper">
                    <table class="rotate">
                        <tbody>
                            <tr>
                                <td rowspan="4" style="width: 120px;text-align: center;vertical-align: middle;">
                                    <qr-code [value]="qrCodeInfor"></qr-code>
                                </td>
                                <td class="p-0" style="width: 10px;" translate>SSN#</td>
                                <td style="width: 10px;">:</td>
                                <td class="p-0">{{patientData?.SSN}}</td>
                            </tr>
                            <tr>
                                <td class="p-0" style="width: 10px;" translate>Name:</td>
                                <td style="width: 10px;">:</td>
                                <td class="p-0">{{patientData?.FullName}}</td>
                            </tr>
                            <tr>
                                <td class="p-0" style="width: 10px;" translate>DOB</td>
                                <td style="width: 10px;">:</td>
                                <td class="p-0">{{patientData?.DOB | date:'dd-MMM-yyyy'}} <span
                                        style="padding-left:3rem;">{{patientData?.Gender}}</span></td>
                            </tr>
                            <tr>
                                <td class="p-0" style="width: 10px;" translate>NAT</td>
                                <td style="width: 10px;">:</td>
                                <td class="p-0">{{patientData?.Nationality}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-backdrop="static" tabindex="-1" id="NationalIdPhoto" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>National ID</h5>              
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body" id="NationalIdPhoto">                
                <img class="w-100" [src]="nationalIdPhoto" alt="">                 
            </div>
        </div>
    </div>
</div>


<!-- Modal for Doctor Availability-->
<div class="modal" data-bs-backdrop="static" tabindex="-1" id="doctorAvailability" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-xl ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>Doctor Availability Information</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="clearfields()"></button>
            </div>
            <div class="modal-body">
                <div class="row" [formGroup]="myGroup">
                    <div class="col-lg-4 col-md-6">
                        <div class="d-flex align-items-center">
                            <label for="" class="form-label mb-0 px-2" translate>Specialisation</label>
                            <select name="" id="" class="form-select" formControlName="specialisationName"
                                (change)="specialisationChange($event)">
                                <option [ngValue]="null" translate>Select</option>
                                <option *ngFor="let special of specialisationResponseData" [ngValue]="special.id">
                                    {{this.lang == 'ar' ? special.name2L : special.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="d-flex align-items-center">
                            <label for="" class="form-label mb-0 px-2" translate>Doctor</label>
                            <select name="" id="" class="form-select" formControlName="DoctorName"
                                (change)="DoctorChange($event)">
                                <option [ngValue]="null" translate>Select</option>
                                <option *ngFor="let doct of doctorDropdown" [ngValue]="doct.EmpID">
                                    {{this.lang == 'ar' ? doct.FullName2L : doct.FullName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="d-flex align-items-center">
                            <label for="" class="form-label mb-0 px-2 text-nowrap" translate>Doctor Code</label>
                            <input type="text" class="form-control" id="doctorCodeSearchText"
                                (keyup)="onSearchDoctor($event)" placeholder="{{'Doctor Code' |translate}}">
                        </div>
                    </div>
                    <div class="col-1">
                        <button type="button" class="btn btn-danger-outline"
                            (click)="Search(myGroup.get('specialisationName'), myGroup.get('DoctorName') )"
                            [disabled]="enableSearch" translate>Search</button>
                    </div>
                    <div class="col-1">
                        <button type="button" class="btn btn-danger-outline" (click)="clearfields()"
                            translate>Clear</button>
                    </div>
                </div>
                <div class="row my-3 g-3">
                    <div class="col-xl-4 col-lg-6" #ele
                        *ngFor="let Specialisation of SpecializationLevelDataLoadingData, let i=index">
                        <div class="availability__card" [attr.id]="'Id'+i" (click)="getID($event, Specialisation)">
                            <div class="info">
                                <p class="label" translate>Doctor</p>
                                <p>{{this.lang == 'ar' ? Specialisation.DoctorName2L : Specialisation.DoctorName}}</p>
                            </div>
                            <div class="info">
                                <p class="label" translate>Code</p>
                                <p>{{Specialisation.DoctorCode}}</p>
                            </div>
                            <div class="info">
                                <p class="label" translate>Specialisation</p>
                                <p>{{this.lang == 'ar' ? Specialisation.Specialisation2L :
                                    Specialisation.Specialisation}}</p>
                            </div>
                            <div class="info-cards">
                                <div class="info-card">
                                    <p class="label" translate>Avl Slots</p>
                                    <p>{{Specialisation.avlSlot}}</p>
                                </div>
                                <div class="info-card">
                                    <p class="label" translate>Billed</p>
                                    <p>{{Specialisation.TotalBills}}</p>
                                </div>
                                <div class="info-card">
                                    <p class="label" translate>Waiting</p>
                                    <p>{{Specialisation.waiting}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger-outline" data-bs-dismiss="modal" (click)="clearfields()"
                    translate>Close</button>
                <button type="button" class="btn btn-main-outline" data-bs-toggle="modal" href="#reviewAndPayment"
                    [disabled]="!fetchingSerchValue" translate>Review & Make Payment</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal for View Modifications-->
<div class="modal" data-bs-backdrop="static" tabindex="-1" id="viewModifications" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-xl ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>Modified Information</h5>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="viewModificationForm" (keydown.enter)="$event.preventDefault()">
                    <div class="d-flex w-100 align-items-center justify-content-between mb-3">
                        <div class="d-flex">
                            <div class="d-flex align-items-center">
                                <label for="" class="form-label mb-0 px-2 text-nowrap" translate>From Date</label>
                                <mat-form-field appearance="fill">
                                    <mat-label translate>dd-MMM-yyyy</mat-label>
                                    <input matInput class="" formControlName="fromdate" [matDatepicker]="fromdate"
                                        (click)="fromdate.open()">
                                    <mat-datepicker-toggle matSuffix [for]="fromdate"></mat-datepicker-toggle>
                                    <mat-datepicker #fromdate></mat-datepicker>
                                </mat-form-field>
                            </div>

                            <div class="d-flex align-items-center">
                                <label for="" class="form-label mb-0 px-2 text-nowrap" translate>To Date</label>
                                <mat-form-field appearance="fill">
                                    <mat-label translate>dd-MMM-yyyy</mat-label>
                                    <input matInput class="" formControlName="todate" [matDatepicker]="todate"
                                        (click)="todate.open()">
                                    <mat-datepicker-toggle matSuffix [for]="todate"></mat-datepicker-toggle>
                                    <mat-datepicker #todate></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class="">
                                <button type="button" class="btn btn-main-fill mx-2" translate
                                    (click)="FetchViewModificationData()">Search</button>
                            </div>
                            <div class="">
                                <button type="button" class="btn btn-main-outline" translate>Clear</button>
                            </div>
                        </div>
                    </div>
                </form>
                <table class="table">
                    <thead>
                        <tr>
                            <th translate>Created Date</th>
                            <th translate>Field</th>
                            <th translate>Employee</th>
                            <!-- <th translate>Host Name</th> -->
                            <th translate>Previous Data</th>
                            <th translate>Latest Data</th>
                            <th translate>Workstations</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let view of viewModificationList;let i=index">
                            <td>{{view.Createdate}}</td>
                            <td>{{view.DBColumnName}}</td>
                            <td>{{view.EmployeeName}}</td>
                            <!-- <td>{{view.HostName}}</td> -->
                            <td>{{view.PreviousValue}}</td>
                            <td>{{view.UpdatedValue}}</td>
                            <td>{{view.WorkStations}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">

            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-backdrop="static" tabindex="-1" id="IsEmployeeDetails" tabindex="-1" [ngStyle]="{'display':displayEmployeeDetailsmodal}">
    <div class="modal-dialog modal-dialog-scrollable modal-xl ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>Employee Search</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close" (click)="closeEmployeeDetailsPopup()"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="IsEmployeeDetailsForm" (keydown.enter)="$event.preventDefault()">
                    <div class="d-flex w-100 align-items-center justify-content-between mb-3">
                        <div class="d-flex align-items-center">
                            <label for="" class="form-label mb-0 px-2 text-nowrap" translate>Employee No. / Name</label>
                            <input type="text" class="form-control" id="empNo" formControlName="empNo"
                                (keyup)="onSearchEmployee($event, 'EmpNo')" placeholder="{{'Employee No./Name' |translate}}">
                        </div>
                        <div class="d-flex align-items-center">
                            <label for="" class="form-label mb-0 px-2 text-nowrap" translate>Employee No. / Name</label>
                            <input type="text" class="form-control" id="empName" formControlName="empName"
                                (keyup)="onSearchEmployee($event, 'EmpName')" placeholder="{{'Employee No./Name' |translate}}">
                        </div>
                        <div class="d-flex">
                            <!-- <div class="">
                                <button type="button" class="btn btn-main-fill mx-2" translate
                                    (click)="FetchViewModificationData()">Search</button>
                            </div>
                            <div class="">
                                <button type="button" class="btn btn-main-outline" translate>Clear</button>
                            </div> -->
                        </div>
                    </div>
                </form>
                    <table class="table">
                        <thead>
                            <tr>                            
                                <th translate>Employee Number</th>
                                <th translate>Employee Name</th>
                                <th translate>Department</th>  
                                <th translate>Specialisation</th> 
                                <th translate>Action</th>                          
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let employee of employeeDetails;let i=index">
                              <td>{{employee.EmpNo}}</td>
                              <td>{{this.lang == 'ar' ? employee.FullName2l : employee.FullName}}</td>
                              <td>{{this.lang == 'ar' ? employee.DepartmentName2l : employee.DepartmentName}}</td> 
                              <td>{{this.lang == 'ar' ? employee.Specialisation2l : employee.Specialisation}}</td>
                              <td><button class="btn btn-main-fill" translate type="button" (click)="onEmployeeSelect(employee)">Select</button></td>                         
                            </tr>
                          </tbody>
                    </table>
                
            </div>
            <div class="modal-footer">

            </div>
        </div>
    </div>
</div>
<!-- Review and Paymemnt-->
<div class="modal" data-bs-backdrop="static" tabindex="-1" id="reviewAndPayment" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable ">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>Review & Make Payment</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="clearfields()"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <div class="card__dashed mb-4">
                    <h5 class="heading" translate>Patient Details:</h5>
                    <p translate>Name : <span>{{nameValue}}</span> </p>
                    <p translate><span class="clr-grey" translate>Age:</span>{{ageValue}} Years</p>
                    <p class="mb-0"><span class="clr-grey" translate>SSN: </span>{{UHID}}</p>
                </div>
                <div class="card__dashed">
                    <h5 class="heading" translate>Consultation With:</h5>
                    <div class="row align-items-center">
                        <div class="col-3">
                            <div class="img-rounded mx-auto">
                                <img src="assets/images/Avatar.png" alt="">
                            </div>
                        </div>
                        <div class="col-9">
                            <p class="mb-2">{{docName}}</p>
                            <p class="mb-2">{{docCode}}</p>
                            <p>{{docspecialisation}}</p>
                            <p translate><span class="clr-grey" translate>Date :</span> {{dateValue | date :
                                'dd-MMM-yyyy'}}</p>
                            <!-- <p class="mb-0"><span class="clr-grey">Time: </span>{{timeValue}}</p> -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger-outline" data-bs-toggle="modal" href="#doctorAvailability"
                    translate>Cancel</button>
                <!-- <button type="button" class="btn btn-main-outline" data-bs-dismiss="modal">Pay Later </button> -->
                <button class="btn btn-main-outline" translate>Make Payment</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-backdrop="static" id="YakeenServiceinfoMessage" tabindex="-1" [ngStyle]="{'display':displayYakeenInfoModal}">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <h3 translate>Alert</h3>
                <p translate>Please enter National Id & Date Of Birth</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger-outline" #closebutton data-bs-dismiss="modal"
                    (click)="closeYakeenInfoModalpopup()" aria-label="Close" translate>Close</button>
            </div>
        </div>
    </div>
</div>
<div class="loader-wrapper" *ngIf="loader">
    <div class="loader">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
        <div class="bar4"></div>
        <div class="bar5"></div>
        <div class="bar6"></div>
        <div class="bar1"></div>
    </div>
</div>
<!-- <div class="modal" id="showValidationMessage" tabindex="-1" [ngStyle]="{'display':displayValidationStyle}">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">

            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <h3>Information</h3>
                <p>Please enter mandatory fields</p>                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-main-outline" (click)="closePopup()">Ok</button>
            </div>
        </div>
    </div>
</div> -->